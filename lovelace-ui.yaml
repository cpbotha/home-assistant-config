background: var(--background-image)
custom_header:
  background: rgba(155, 155, 155, 0.25)
  button_text:
    options: '{{ hours24 }}:{{ minutesLZ }}'
  compact_mode: true
  editor_warnings: true
decluttering_templates:
  automation_template:
    card:
      card:
        show_header_toggle: false
        title: '[[name]] automations'
        type: entities
      filter:
        include:
        - entity_id: automation.[[slug]]*
      sort: entity_id
      type: custom:auto-entities
title: Home
views:
- badges:
  - entity: person.david
  - entity: person.karen
  - entity: sensor.home_alarm_keypad
  - entity: sun.sun
  cards:
  - cards:
    - entity: alarm_control_panel.home_alarm
      type: alarm-panel
    - card:
        show_header_toggle: false
        type: entities
      filter:
        exclude:
        - state: '0'
        - state: idle
        - state: Ready
        include:
        - entity_id: sensor.home_alarm_keypad
        - entity_id: sensor.eskom_loadshedding_stage
        - entity_id: sensor.coct_loadshedding_stage
      show_empty: false
      type: custom:auto-entities
    - card:
        show_header_toggle: false
        title: Active Timers
        type: entities
      filter:
        exclude:
        - state: idle
        - entity_id: timer.88e9fe88abfe
        include:
        - entity_id: timer*
      show_empty: false
      type: custom:auto-entities
    - card:
        show_header_toggle: false
        title: Open Doors/Windows
        type: entities
      filter:
        exclude:
        - entity_id: timer*
        - state: 'off'
        - state: Locked_out
        - state: closed
        - entity_id: input*
        - entity_id: light*
        - name: '*Battery*'
        - name: '*Mode*'
        - name: '*Connectivity*'
        - name: '*Pet Door*'
        - entity_id: binary_sensor.back_garage_door
        - entity_id: binary_sensor.front_garage_door_window
        include:
        - entity_id: cover*
          options:
            secondary_info: last-changed
        - name: '*Door'
          options:
            secondary_info: last-changed
        - name: '*Window'
          options:
            secondary_info: last-changed
        - name: '*Pet Door*'
          options:
            secondary_info: last-changed
      show_empty: false
      type: custom:auto-entities
    type: vertical-stack
  - cards:
    - cards:
      - entity: light.small_bedroom
        icon_height: 140px
        type: light
      - entity: light.main_bedroom
        icon_height: 140px
        type: light
      type: horizontal-stack
    - cards:
      - entity: light.kitchen
        icon_height: 140px
        type: light
      - entity: light.lounge
        icon_height: 140px
        type: light
      - entity: light.braai_room
        icon_height: 140px
        type: light
      column: 2
      type: horizontal-stack
      view_layout: null
    layout_type: vertical
    min_columns: 2
    type: custom:layout-card
  - cards:
    - entity: weather.home
      type: weather-forecast
    - experimental:
        color_threshold: true
      header:
        colorize_states: false
        show: true
        show_states: true
        title: Outside temperature
      series:
      - color_threshold:
        - color: '#7e0001'
          value: 37
        - color: '#9a0000'
          value: 35
        - color: '#d80100'
          value: 32
        - color: '#fe0000'
          value: 29
        - color: '#f46523'
          value: 26
        - color: '#ff9e07'
          value: 24
        - color: '#ffd728'
          value: 21
        - color: '#ffff01'
          value: 18
        - color: '#cdff00'
          value: 15
        - color: '#80ff00'
          value: 13
        - color: '#3ab54a'
          value: 10
        - color: '#05f7f8'
          value: 7
        - color: '#00ccff'
          value: 4
        - color: '#017eff'
          value: 2
        - color: '#0000fe'
          value: -1
        - color: '#1b1464'
          value: -4
        - color: '#662e93'
          value: -7
        curve: smooth
        entity: sensor.heat_index
        group_by:
          duration: 30min
          func: avg
        show:
          extremas: true
        stroke_width: 2
      type: custom:apexcharts-card
    - type: custom:sun-card
    layout: vertical
    layout_type: vertical
    min_columns: 1
    type: custom:layout-card
    view_layout: vertical
  icon: mdi:home
  panel: false
  path: default_view
  title: Home
  type: custom:horizontal-layout
- badges: []
  cards:
  - cards:
    - entity: alarm_control_panel.home_alarm
      type: alarm-panel
    - card:
        show_header_toggle: false
        type: entities
      filter:
        exclude:
        - state: '0'
        include:
        - entity_id: sensor.home_alarm_keypad
        - entity_id: sensor.eskom_loadshedding_stage
      show_empty: false
      type: custom:auto-entities
    - card:
        show_header_toggle: false
        title: Open Doors/Windows
        type: entities
      filter:
        exclude:
        - entity_id: timer*
        - state: 'off'
        - state: Locked_out
        - state: closed
        - entity_id: input*
        - entity_id: light*
        - name: '*Battery*'
        - name: '*Mode*'
        - name: '*Connectivity*'
        - entity_id: binary_sensor.back_garage_door
        - entity_id: binary_sensor.front_garage_door_window
        include:
        - entity_id: cover*
          options:
            secondary_info: last-changed
        - name: '*Door'
          options:
            secondary_info: last-changed
        - name: '*Window'
          options:
            secondary_info: last-changed
        - name: '*Pet Door*'
          options:
            secondary_info: last-changed
      show_empty: false
      type: custom:auto-entities
    - card:
        show_header_toggle: false
        title: Recent activity (last 60 min)
        type: entities
      filter:
        exclude:
        - entity_id: input*
        - entity_id: light*
        - name: '*Battery*'
        - name: '*Mode*'
        - name: '*Connectivity*'
        - entity_id: binary_sensor.back_garage_door
        - entity_id: binary_sensor.front_garage_door_window
        - name: '*Notify*'
        include:
        - entity_id: '*beam*'
          last_changed: < 60
          options:
            secondary_info: last-changed
        - entity_id: '*pir*'
          last_changed: < 60
          options:
            secondary_info: last-changed
        - entity_id: cover*
          last_changed: < 60
          options:
            secondary_info: last-changed
        - last_changed: < 60
          name: '*Door'
          options:
            secondary_info: last-changed
        - last_changed: < 60
          name: '*Window'
          options:
            secondary_info: last-changed
        - last_changed: < 60
          name: '*Pet Door*'
          options:
            secondary_info: last-changed
        - entity_id: sensor.jessie
          last_changed: < 60
          options:
            secondary_info: last-changed
        - entity_id: sensor.ziva
          last_changed: < 60
          options:
            secondary_info: last-changed
        - entity_id: sensor.vuur
          last_changed: < 60
          options:
            secondary_info: last-changed
        - entity_id: sensor.vlam
          last_changed: < 60
          options:
            secondary_info: last-changed
      show_empty: false
      sort:
        method: last_changed
        reverse: true
      type: custom:auto-entities
    - card:
        show_header_toggle: false
        title: Doors & Gates
        type: entities
      filter:
        exclude:
        - entity_id: '*gateway*'
        include:
        - entity_id: cover.*
          options:
            secondary_info: last-changed
      show_empty: false
      type: custom:auto-entities
    type: vertical-stack
  - cards:
    - cards:
      - card:
          show_header_toggle: false
          title: Camera Alerts
          type: entities
        filter:
          exclude:
          - state: idle
          include:
          - entity_id: input_boolean.camera_alerts
          - entity_id: timer.camera_alerts_disabled
        show_empty: false
        type: custom:auto-entities
      type: vertical-stack
    - camera_image: camera.front_camera
      entities:
      - camera.front_camera
      tap_action:
        action: more-info
      type: picture-glance
    - camera_image: camera.back_camera
      entities:
      - camera.back_camera
      tap_action:
        action: more-info
      type: picture-glance
    type: vertical-stack
  - cards:
    - entities:
      - entity: sensor.home_hub
      - entity: sensor.kitchen
      - buttons:
        - entity: sensor.kitchen
          icon: mdi:lock-open-variant
          name: Unlocked
          state_styles:
            Unlocked:
              icon:
                color: rgb(5, 147, 255)
              text:
                color: rgb(5, 147, 255)
          tap_action:
            action: call-service
            service: switch.turn_on
            service_data:
              entity_id: switch.kitchen_lock_keepout
        - entity: sensor.kitchen
          icon: mdi:lock
          name: Out-only
          state_styles:
            Locked_in:
              icon:
                color: rgb(5, 147, 255)
              text:
                color: rgb(5, 147, 255)
          tap_action:
            action: call-service
            service: switch.turn_off
            service_data:
              entity_id: switch.kitchen_lock_keepout
        type: custom:paper-buttons-row
      - buttons:
        - entity: sensor.pet_flap_kitchen_pet_door
          icon: mdi:lock
          name: Locked-all
          state_styles:
            Unlocked:
              icon:
                color: rgb(5, 147, 255)
              text:
                color: rgb(5, 147, 255)
          tap_action:
            action: call-service
            service: surepetcare.set_lock_state
            service_data:
              flap_id: 204121
              lock_state: locked_all
        - entity: sensor.pet_flap_kitchen_pet_door
          icon: mdi:lock
          name: In-only
          state_styles:
            Locked_in:
              icon:
                color: rgb(5, 147, 255)
              text:
                color: rgb(5, 147, 255)
          tap_action:
            action: call-service
            service: surepetcare.set_lock_state
            service_data:
              flap_id: 204121
              lock_state: locked_in
        type: custom:paper-buttons-row
      - entity: sensor.kitchen_battery
      - entity: sensor.jessie
        secondary_info: last-changed
      - entity: sensor.ziva
        secondary_info: last-changed
      - entity: sensor.vuur
        secondary_info: last-changed
      - entity: sensor.vlam
        secondary_info: last-changed
      - entity: switch.kitchen_curfew
      - entity: switch.kitchen_keepin
      - entity: switch.kitchen_keepout
      show_header_toggle: false
      title: Pet Door
      type: entities
    - entities:
      - buttons:
        - entity: binary_sensor.main_bedroom_window
          name: Bypass Main Bedroom Window
          state_styles:
            Closed:
              icon:
                color: rgb(5, 147, 255)
              text:
                color: rgb(5, 147, 255)
            Open:
              icon:
                color: rgb(25, 147, 255)
              text:
                color: rgb(5, 147, 255)
          tap_action:
            action: call-service
            service: envisalink.alarm_keypress
            service_data:
              entity_id: alarm_control_panel.home_alarm
              keypress: '*115#'
        - entity: binary_sensor.back_beam
          name: Bypass Back Beam
          state_styles:
            Closed:
              icon:
                color: rgb(5, 147, 255)
              text:
                color: rgb(5, 147, 255)
            Open:
              icon:
                color: rgb(25, 147, 255)
              text:
                color: rgb(5, 147, 255)
          tap_action:
            action: call-service
            service: envisalink.alarm_keypress
            service_data:
              entity_id: alarm_control_panel.home_alarm
              keypress: '*126#'
        - entity: binary_sensor.front_beam
          name: Bypass Front Beam
          state_styles:
            Closed:
              icon:
                color: rgb(5, 147, 255)
              text:
                color: rgb(5, 147, 255)
            Open:
              icon:
                color: rgb(25, 147, 255)
              text:
                color: rgb(5, 147, 255)
          tap_action:
            action: call-service
            service: envisalink.alarm_keypress
            service_data:
              entity_id: alarm_control_panel.home_alarm
              keypress: '*125#'
        type: custom:paper-buttons-row
      title: Alarm Commands
      type: entities
    - entities:
      - entity: input_boolean.guest
      - entity: input_boolean.holiday
      type: entities
    type: vertical-stack
  icon: mdi:alarm-light
  path: security
  title: Security
- badges: []
  cards:
  - card:
      show_header_toggle: false
      title: Lights Bed & Bath Rooms
      type: entities
    filter:
      exclude:
      - entity_id: '*gateway*'
      - state: unavailable
      - entity_id: '*awake*'
      - entity_id: '*night*'
      - entity_id: '*outside*'
      - entity_id: '*court*'
      - entity_id: '*braai*'
      include:
      - entity_id: light.*bath*
      - entity_id: light.*bed*
      - entity_id: light.*ensuite*
    sort:
      method: name
    type: custom:auto-entities
  - card:
      show_header_toggle: false
      title: Lights Braai Area
      type: entities
    filter:
      exclude:
      - entity_id: '*gateway*'
      - state: unavailable
      - entity_id: '*awake*'
      - entity_id: '*night*'
      - entity_id: '*outside*'
      - entity_id: '*court*'
      - entity_id: light.*bed*
      - entity_id: light.*ensuite*
      - entity_id: light.*garage*
      - entity_id: light.*pool*
      include:
      - entity_id: light.bar*
      - entity_id: light.*braai*
    sort:
      method: name
    type: custom:auto-entities
  - card:
      show_header_toggle: false
      title: Outside Lights
      type: entities
    filter:
      exclude:
      - entity_id: '*gateway*'
      - state: unavailable
      - entity_id: '*awake*'
      - entity_id: '*night*'
      include:
      - entity_id: light.*courtyard*
      - entity_id: light.*outside*
      - entity_id: light.*garage*
      - entity_id: light.*pool*
    sort:
      method: name
    type: custom:auto-entities
  - card:
      show_header_toggle: false
      title: Lights
      type: entities
    filter:
      exclude:
      - entity_id: '*gateway*'
      - state: unavailable
      - entity_id: '*awake*'
      - entity_id: '*night*'
      - entity_id: '*outside*'
      - entity_id: '*court*'
      - entity_id: light.*bath*
      - entity_id: light.*bed*
      - entity_id: light.*ensuite*
      - entity_id: light.*garage*
      - entity_id: light.*pool*
      - entity_id: light.*bar*
      - entity_id: light.*braai*
      include:
      - entity_id: light.*
    sort:
      method: name
    type: custom:auto-entities
  - card:
      show_header_toggle: false
      title: Switches
      type: entities
    filter:
      exclude:
      - entity_id: '*gateway*'
      - entity_id: '*firmware_update'
      - entity_id: '*garagedoor*'
      - entity_id: '*gragedoor*'
      - entity_id: '*keepin*'
      - entity_id: '*keepout*'
      - entity_id: '*aircon*'
      - name: '*Pool*'
      - name: '*Geyser*'
      - entity_id: switch.88e9fe88abfe
      - name: '*Harmony*'
      - name: '*Fridge*'
      - entity_id: switch.kitchen_lock*
      - entity_id: switch.kitchen_curfew*
      - name: '*Echo*'
      include:
      - entity_id: switch.*
    sort:
      method: name
    type: custom:auto-entities
  icon: mdi:lightbulb-multiple-outline
  path: lights
  title: Lights
- badges: []
  cards:
  - cards:
    - entity: weather.home
      type: weather-forecast
    - card:
        show_header_toggle: false
        type: entities
      filter:
        include:
        - entities:
          - entity: sensor.weather_today_min
            name: Min
          entity: sensor.weather_today_max
          name: Today predicted
          state_header: Max
          type: custom:multiple-entity-row
      show_empty: false
      sort:
        method: state
        numeric: true
        reverse: true
      type: custom:auto-entities
    - experimental:
        color_threshold: true
      graph_span: 48h
      header:
        colorize_states: false
        show: true
        show_states: true
        title: Outside temperature
      now:
        label: now
        show: true
      series:
      - color_threshold:
        - color: '#7e0001'
          value: 37
        - color: '#9a0000'
          value: 35
        - color: '#d80100'
          value: 32
        - color: '#fe0000'
          value: 29
        - color: '#f46523'
          value: 26
        - color: '#ff9e07'
          value: 24
        - color: '#ffd728'
          value: 21
        - color: '#ffff01'
          value: 18
        - color: '#cdff00'
          value: 15
        - color: '#80ff00'
          value: 13
        - color: '#3ab54a'
          value: 10
        - color: '#05f7f8'
          value: 7
        - color: '#00ccff'
          value: 4
        - color: '#017eff'
          value: 2
        - color: '#0000fe'
          value: -1
        - color: '#1b1464'
          value: -4
        - color: '#662e93'
          value: -7
        curve: smooth
        entity: sensor.heat_index
        extend_to_end: false
        group_by:
          duration: 30min
          func: avg
        show:
          extremas: true
        stroke_width: 2
      - color: '#797D7F'
        entity: sensor.outside_temperature
        extend_to_end: false
        fill_raw: last
        group_by:
          duration: 30m
          func: avg
        name: Temperature
        opacity: 0.5
        stroke_width: 2
        unit: °C
      - color_threshold:
        - color: '#7e0001'
          value: 37
        - color: '#9a0000'
          value: 35
        - color: '#d80100'
          value: 32
        - color: '#fe0000'
          value: 29
        - color: '#f46523'
          value: 26
        - color: '#ff9e07'
          value: 24
        - color: '#ffd728'
          value: 21
        - color: '#ffff01'
          value: 18
        - color: '#cdff00'
          value: 15
        - color: '#80ff00'
          value: 13
        - color: '#3ab54a'
          value: 10
        - color: '#05f7f8'
          value: 7
        - color: '#00ccff'
          value: 4
        - color: '#017eff'
          value: 2
        - color: '#0000fe'
          value: -1
        - color: '#1b1464'
          value: -4
        - color: '#662e93'
          value: -7
        data_generator: "const res = entity.attributes.forecast.map((entry) => {\n\
          \  return [new Date(entry.datetime).getTime(), entry.temperature];\n});\n\
          return [[new Date().getTime(), parseFloat(entity.attributes.temperature)],\
          \ ...res]\n"
        entity: weather.home_hourly
        extend_to_end: false
        name: Hourly forecast
        opacity: 0.7
        show:
          in_header: false
        stroke_width: 2
        type: line
        unit: °C
      span:
        offset: -14h
        start: day
      type: custom:apexcharts-card
    layout: vertical
    layout_type: vertical
    min_columns: 3
    type: custom:layout-card
    view_layout: vertical
  - cards:
    - card:
        show_header_toggle: false
        title: Temperature
        type: entities
      filter:
        exclude:
        - entity_id: '*gateway*'
        - entity_id: '*disk*'
        - entity_id: '*shelly*'
        - entity_id: '*goodwe*'
        - entity_id: '*mi_9t*'
        - entity_id: '*nokia*'
        include:
        - entities:
          - entity: sensor.heat_index
            name: Feels like
          - entity: sensor.outside_humidity
            name: Humidity
          entity: sensor.outside_temperature
          name: Outside
          state_header: Temp
          type: custom:multiple-entity-row
        - entities:
          - entity: sensor.office_humidity
            name: Humidity
          entity: sensor.office_temperature
          name: Office
          state_header: Temp
          type: custom:multiple-entity-row
        - entities:
          - entity: sensor.front_bathroom_humidity
            name: Humidity
          entity: sensor.front_bathroom_temperature
          name: Front Bathroom
          state_header: Temp
          type: custom:multiple-entity-row
        - entities:
          - entity: sensor.scullery_humidity
            name: Humidity
          entity: sensor.scullery_temperature
          name: Scullery
          state_header: Temp
          type: custom:multiple-entity-row
        - entities:
          - entity: sensor.baby_room_humidity
            name: Humidity
          entity: sensor.baby_room_temperature
          name: Baby Room
          state_header: Temp
          type: custom:multiple-entity-row
        - entities:
          - entity: sensor.main_bathroom_humidity
            name: Humidity
          entity: sensor.main_bathroom_temperature
          name: Main Bathroom
          state_header: Temp
          type: custom:multiple-entity-row
        - entities:
          - entity: sensor.main_bedroom_humidity
            name: Humidity
          entity: sensor.main_bedroom_temperature
          name: Main Bedroom
          state_header: Temp
          type: custom:multiple-entity-row
        - entities:
          - entity: sensor.lounge_humidity
            name: Humidity
          entity: sensor.lounge_temperature
          name: Lounge
          state_header: Temp
          type: custom:multiple-entity-row
        - entities:
          - entity: sensor.fridge_humidity
            name: Humidity
          entity: sensor.fridge_temperature
          name: Fridge
          state_header: Temp
          type: custom:multiple-entity-row
        - entity: sensor.poolsense_temperature
          name: Pool
          state_header: Temp
          type: custom:multiple-entity-row
      show_empty: false
      sort:
        method: state
        numeric: true
        reverse: true
      type: custom:auto-entities
    layout: vertical
    layout_type: vertical
    min_columns: 3
    type: custom:layout-card
    view_layout: vertical
  - cards:
    - control:
      - hvac
      entity: climate.midea_ac_30786325862093
      layout:
        mode:
          headings: false
          icons: true
          names: true
        step: row
      step_size: '1'
      type: custom:simple-thermostat
    - control:
      - hvac
      entity: climate.midea_ac_30786325862153
      layout:
        mode:
          headings: false
          icons: true
          names: true
        step: row
      step_size: '1'
      type: custom:simple-thermostat
    - control:
      - hvac
      entity: climate.midea_ac_32985348871179
      layout:
        mode:
          headings: false
          icons: true
          names: true
        step: row
      step_size: '1'
      type: custom:simple-thermostat
    layout: vertical
    layout_type: vertical
    min_columns: 3
    type: custom:layout-card
    view_layout: vertical
  icon: mdi:thermometer
  path: weather
  title: Weather
  type: custom:horizontal-layout
- badges: []
  cards:
  - cards:
    - animation: flash
      center:
        content:
        - name: Gen
          preset: autarky
        - name: Usage
          preset: ratio
        type: bars
      entities:
      - decimals: 2
        display_abs: true
        entity: sensor.goodwe_ppv
        icon: mdi:solar-power
        name: PV
        preset: solar
        producer: true
        unit_of_display: W
      - decimals: 2
        display_abs: true
        entity: sensor.goodwe_pgrid
        icon: mdi:transmission-tower
        invert_value: true
        name: Grid
        preset: grid
        unit_of_display: W
      - consumer: true
        decimals: 2
        display_abs: true
        entity: sensor.goodwe_pbattery1
        icon: mdi:battery-high
        name: Battery
        preset: battery
        producer: true
        unit_of_display: W
      - consumer: true
        decimals: 2
        display_abs: true
        entity: sensor.goodwe_house_consumption
        icon: mdi:home-assistant
        invert_value: true
        name: House
        preset: home
        unit_of_display: W
      title: Power distribution
      type: custom:power-distribution-card
    - entities:
      - entity: sensor.goodwe_pback_up
        entity_row: true
        positions:
          minmax: inside
      - entity: sensor.energy_non_essentials
      max: 4600
      severity:
      - color: Red
        from: 4001
        to: 9999
      - color: '#990000'
        from: -1
        to: -4000
      - color: '#cc9900'
        from: 0
        to: 0
      - color: Green
        from: 1
        to: 1000
      - color: '#669900'
        from: 1001
        to: 4000
      type: custom:bar-card
    - entities:
      - entities:
        - entity: sensor.goodwe_battery_temperature
          name: Temp
        - entity: sensor.goodwe_battery_soh
          name: SoH
        - entity: sensor.battery_available
          name: Available
        - entity: sensor.battery_tocharge
          name: ToCharge
        entity: sensor.goodwe_battery_mode_label
        name: Battery Status
        state_header: Mode
        type: custom:multiple-entity-row
      - columns: 1
        entities:
        - entity: sensor.goodwe_battery_soc
          name: Battery SoC
        entity_row: true
        max: 100
        severity:
        - color: Red
          from: 0
          to: 20
        - color: Orange
          from: 20
          to: 30
        - color: Yellow
          from: 30
          to: 40
        - color: '#669900'
          from: 40
          to: 80
        - color: Green
          from: 80
          to: 100
        type: custom:bar-card
      - entities:
        - entity: sensor.goodwe_vbattery1
          name: false
        - entity: sensor.goodwe_ibattery1
          name: false
        entity: sensor.goodwe_pbattery1
        name: Battery Data
        type: custom:multiple-entity-row
      - entities:
        - entity: sensor.goodwe_battery_charge_limit
          name: Charge
        entity: sensor.goodwe_battery_discharge_limit
        name: Battery Limits
        state_header: Discharge
        type: custom:multiple-entity-row
      - entity: sensor.goodwe_battery_warning
      show_header_toggle: false
      state_color: false
      type: entities
    layout: vertical
    layout_type: vertical
    min_columns: 1
    type: custom:layout-card
    view_layout: vertical
  - cards:
    - apex_config:
        legend:
          show: true
      graph_span: 36h
      header:
        show: true
        show_states: true
        title: Solar Production vs. forecast
      now:
        label: now
        show: true
      series:
      - color: '#FFF700'
        entity: sensor.goodwe_ppv
        extend_to_end: false
        fill_raw: last
        group_by:
          duration: 30min
          func: avg
        name: Actual
        show:
          extremas: false
          in_header: false
        stroke_width: 2
        unit: W
      - color: '#3498DB'
        entity: sensor.solcast_forecast_data
        extend_to_end: false
        fill_raw: last
        name: Forecast History
        show:
          extremas: false
          in_header: false
        stroke_width: 2
        transform: return x * 1000;
        unit: W
      - color: '#797D7F'
        entity: sensor.solcast_forecast_10
        extend_to_end: false
        fill_raw: last
        name: Forecast 10 History
        opacity: 0.4
        show:
          extremas: false
          in_header: false
        stroke_width: 2
        transform: return x * 1000;
        unit: W
      - color: '#797D7F'
        entity: sensor.solcast_forecast_90
        extend_to_end: false
        fill_raw: last
        name: Forecast 90 History
        opacity: 0.4
        show:
          extremas: false
          in_header: false
        stroke_width: 2
        transform: return x * 1000;
        unit: W
      - color: '#E74C3C'
        data_generator: "return entity.attributes.forecasts.map((entry) => {\n   return\
          \ [new Date(entry.period_end), entry.pv_estimate*1000];\n });\n"
        entity: sensor.solcast_forecast_data
        extend_to_end: false
        name: Forecast
        show:
          extremas: false
          in_header: false
        stroke_width: 2
        type: line
        unit: W
      - color: '#797D7F'
        data_generator: "return entity.attributes.forecasts.map((entry) => {\n   return\
          \ [new Date(entry.period_end), entry.pv_estimate10*1000];\n });\n"
        entity: sensor.solcast_forecast_data
        extend_to_end: false
        name: Forecast 10
        opacity: 0.4
        show:
          extremas: false
          in_header: false
        stroke_width: 2
        type: line
        unit: W
      - color: '#797D7F'
        data_generator: "return entity.attributes.forecasts.map((entry) => {\n   return\
          \ [new Date(entry.period_end), entry.pv_estimate90*1000];\n });\n"
        entity: sensor.solcast_forecast_data
        extend_to_end: false
        name: Forecast 90
        opacity: 0.4
        show:
          extremas: false
          in_header: false
        stroke_width: 2
        type: line
        unit: W
      span:
        offset: -6h
        start: day
      type: custom:apexcharts-card
    - entities:
      - entities:
        - entity: sensor.solcast_forecast
          name: Remaining
        - entity: sensor.solcast_forecast_energy_today_predicted
          name: Predicted
        entity: sensor.solcast_forecast_energy_tomorrow
        icon: mdi:solar-power
        name: Daily
        state_header: Tomorrow
        type: custom:multiple-entity-row
      - entities:
        - entity: sensor.solcast_forecast_energy_current_hour
          name: Current H
        - entity: sensor.solcast_forecast_energy_next_hour
          name: Next H
        entity: sensor.solcast_forecast_peak_time_today_predicted
        icon: mdi:solar-power
        name: Hourly
        state_header: Peak time
        type: custom:multiple-entity-row
      title: Forecast
      type: entities
    - entities:
      - entities:
        - entity: sensor.solar_generate_daily
          name: false
        entity: sensor.solar_generate_monthly
        icon: mdi:solar-power
        name: PV (daily/monthly)
        type: custom:multiple-entity-row
      - entities:
        - entity: sensor.energy_buy_daily
          name: false
        entity: sensor.energy_buy_monthly
        icon: mdi:flash
        name: Grid (daily/monthly)
        type: custom:multiple-entity-row
      - entities:
        - entity: sensor.energy_buy_daily_cost
          name: false
          unit: R
        entity: sensor.energy_buy_monthly_cost
        icon: mdi:currency-brl
        name: Grid cost (daily/monthly)
        type: custom:multiple-entity-row
        unit: R
      title: Solar vs. Grid
      type: entities
    layout: vertical
    layout_type: vertical
    min_columns: 1
    type: custom:layout-card
    view_layout: vertical
  - cards:
    - entities:
      - entities:
        - entity: sensor.goodwe_vgrid
          name: V
        - entity: sensor.goodwe_igrid
          name: A
        - entity: sensor.goodwe_fgrid
          name: F
        entity: sensor.goodwe_grid_in_out_label
        name: On-Grid
        state_header: Mode
        type: custom:multiple-entity-row
      - entity: sensor.goodwe_work_mode_label
      - entity: sensor.goodwe_work_mode
      - entity: sensor.goodwe_temperature
      - entity: sensor.goodwe_error_codes
      - entity: number.depth_of_discharge_on_grid
      - entity: sensor.diag_status
      title: Inverter
      type: entities
    - entities:
      - entities:
        - entity: sensor.goodwe_vpv1
          name: false
        - entity: sensor.goodwe_ipv1
          name: false
        entity: sensor.goodwe_ppv1
        name: PV1 Data
        type: custom:multiple-entity-row
      - entities:
        - entity: sensor.goodwe_vpv2
          name: false
        - entity: sensor.goodwe_ipv2
          name: false
        entity: sensor.goodwe_ppv2
        name: PV2 Data
        type: custom:multiple-entity-row
      title: Panels
      type: entities
    - card:
        show_header_toggle: false
        type: entities
      filter:
        exclude:
        - state: '0'
        - state: idle
        - state: Ready
        include:
        - entity_id: sensor.eskom_loadshedding_stage
        - entity_id: sensor.coct_loadshedding_stage
        - entity_id: timer.loadshedding_slot
      show_empty: false
      type: custom:auto-entities
    - content: '{% if states.sensor.coct_loadshedding_stage.state|int > 0 %} {{ states.sensor.loadshedding_message.state
        }} {% endif %}'
      type: markdown
    layout: vertical
    layout_type: vertical
    min_columns: 1
    type: custom:layout-card
    view_layout: vertical
  icon: mdi:solar-power
  path: power
  title: Power
  type: custom:horizontal-layout
- badges: []
  cards:
  - cards:
    - apex_config:
        legend:
          show: true
      graph_span: 12h
      header:
        show: true
        show_states: true
        title: Experiment
      now:
        label: now
        show: false
      series:
      - entity: sensor.goodwe_average_solar_generation_30min
        extend_to_end: false
        fill_raw: last
        name: Solar average
        show:
          extremas: false
        stroke_width: 2
        unit: W
      - color: '#3498DB'
        entity: sensor.goodwe_average_house_consumption_30min
        extend_to_end: false
        fill_raw: last
        name: Consumption average
        show:
          extremas: false
        stroke_width: 2
        unit: W
      type: custom:apexcharts-card
    - apex_config:
        chart:
          height: 350
          toolbar:
            autoSelected: zoom
            show: true
          xaxis.type: datetime
          zoom:
            autoScaleYaxis: false
            enabled: true
            type: x
      graph_span: 8d
      header:
        colorize_states: true
        show: true
        show_states: true
        title: Usage Daily
      series:
      - entity: sensor.energy_buy_daily
        group_by:
          duration: 24h
          func: max
        type: column
      - entity: sensor.solar_generate_daily
        group_by:
          duration: 24h
          func: max
        type: column
      span:
        end: day
      type: custom:apexcharts-card
    layout: vertical
    layout_type: vertical
    min_columns: 1
    type: custom:layout-card
    view_layout: vertical
  - cards:
    - entities:
      - entity: sensor.goodwe_average_solar_generation_30min
      - entity: sensor.goodwe_average_house_consumption_30min
      type: entities
    - card:
        show_header_toggle: false
        title: Current Power Usage
        type: entities
      entities:
      - entity: sensor.bar_fridge_energy_power
      - entity: sensor.bar_media_feed_energy_power
      - entity: sensor.fridge_energy_power
      - entity: sensor.office_feed_1_energy_power
      - entity: sensor.office_feed_2_energy_power
      - entity: sensor.aircon_main_bedroom_energy_power
      - entity: sensor.pool_pump_power
      - entity: sensor.lights_power
      - entity: sensor.front_bathroom_geyser_power
      - entity: sensor.main_bathroom_geyser_power
      filter:
        exclude:
        - state: '0.0'
        - state: '0.00'
        - state: '0.000'
      show_empty: false
      sort:
        method: state
        numeric: true
        reverse: true
      type: custom:auto-entities
    layout: vertical
    layout_type: vertical
    min_columns: 1
    type: custom:layout-card
    view_layout: vertical
  - cards:
    - card:
        show_header_toggle: false
        title: Daily Power Usage
        type: entities
      entities:
      - entity: sensor.bar_fridge_daily
      - entity: sensor.fridge_daily
      - entity: sensor.office_feed_1_daily
      - entity: sensor.office_feed_2_daily
      - entity: sensor.server_feed_daily
      - entity: sensor.aircon_main_bedroom_daily
      - entity: sensor.pool_pump_daily
      - entity: sensor.lights_daily
      - entity: sensor.front_bathroom_geyser_daily
      - entity: sensor.main_bathroom_geyser_daily
      filter:
        exclude:
        - state: '0'
        - state: '0.0'
        - state: '0.00'
        - state: '0.000'
      show_empty: false
      sort:
        method: state
        numeric: true
        reverse: true
      type: custom:auto-entities
    layout: vertical
    layout_type: vertical
    min_columns: 1
    type: custom:layout-card
    view_layout: vertical
  icon: mdi:flash
  path: power-usage
  title: Power Usage
  type: custom:horizontal-layout
- badges: []
  cards:
  - cards:
    - card:
        show_header_toggle: false
        title: Timers
        type: entities
      filter:
        exclude:
        - state: idle
        - entity_id: timer.88e9fe88abfe
        include:
        - entity_id: timer*
      show_empty: false
      type: custom:auto-entities
    - entities:
      - entity: input_datetime.main_geyser_on_time
      - entity: timer.main_geyser
      - entity: switch.main_bathroom_geyser
        show_last_changed: true
      show_state: true
      state_color: true
      title: Main Bathroom Geyser
      type: glance
    - entities:
      - entity: input_datetime.front_geyser_on_time
      - entity: timer.front_geyser
      - entity: switch.front_bathroom_geyser
        show_last_changed: true
      title: Front Geyser
      type: glance
    layout: vertical
    layout_type: vertical
    min_columns: 1
    type: custom:layout-card
    view_layout: vertical
  - cards:
    - entities:
      - entity: input_datetime.pool_pump_on_time
      - entity: timer.pool_pump
      - entity: switch.pool_pump
        show_last_changed: true
      state_color: true
      title: Pool
      type: glance
    - entities:
      - entity: input_boolean.pool_cover_on
      type: entities
    type: vertical-stack
  - calibration_source:
      calibration_points:
      - map:
          x: 265
          y: 254
        vacuum:
          x: 25500
          y: 25500
      - map:
          x: 285
          y: 254
        vacuum:
          x: 26500
          y: 25500
      - map:
          x: 265
          y: 234
        vacuum:
          x: 25500
          y: 26500
    entity: vacuum.rockrobo
    map_locked: false
    map_source:
      camera: camera.rockrobo_map
    two_finger_pan: false
    type: custom:xiaomi-vacuum-map-card
    vacuum_platform: send_command
  icon: mdi:clock
  path: schedules
  title: Schedules
- badges: []
  cards:
  - cards:
    - entities:
      - entity: sensor.seventeentrack_packages_in_transit
      - entity: sensor.seventeentrack_packages_not_found
      - entity: sensor.seventeentrack_packages_undelivered
      - entity: sensor.seventeentrack_packages_returned
      title: Shipping Overview
      type: entities
    - card:
        title: Packages
        type: entities
      filter:
        include:
        - entity_id: sensor.*track_package_*
          options:
            icon: mdi:truck
            name: '{{ state_attr(config.entity, ''friendly_name'') | replace(''Seventeentrack
              Package: '', '''') }} {{ as_timestamp(states[config.entity].last_changed)|
              timestamp_custom(''%D - %X'') }}

              '
            secondary: '{{ state_attr(config.entity, ''info_text'') }} {%- macro formatvalue(name,
              value, sep='''') %}

              {%- set name = ''{}s'' if value > 1 else name %}

              {{ ''{} {}{}''.format(value, name, padding) if value >= 1 else ''''
              }}

              {%- endmacro %}

              {%- set time = ((as_timestamp(now()) - as_timestamp(states[config.entity].last_changed)))
              %}

              {%- set minutes = formatvalue(''minute'', (time % 3600) // 60, '''')
              %}

              {%- set hours = formatvalue(''hour'', (time % 86400) // 3600, '', '')
              %}

              {%- set days = formatvalue(''day'', time // 86400, '', '') %}

              {{ ''Less than 1 min'' if time < 60 else days + hours + minutes }}

              '
            type: custom:template-entity-row
          state: In Transit
        - entity_id: sensor.*track_package_*
          options:
            icon: mdi:alert-circle-outline
            secondary_info: last-changed
          state: Not Found
        - entity_id: sensor.*track_package_*
          options:
            icon: mdi:keyboard-return
            secondary_info: last-changed
          state: Returned
        - entity_id: sensor.*track_package_*
          options:
            icon: mdi:alert-outline
            secondary_info: last-changed
          state: Undelivered
      type: custom:auto-entities
    type: vertical-stack
  - content: '{% for package in states.sensor.seventeentrack_packages_in_transit.attributes.packages
      %}

      **{{ package.friendly_name }}:** {{ package.info_text }}

      {% endfor %}'
    title: Packages in transit
    type: markdown
  icon: mdi:email-outline
  path: mail
  title: Mail
  visible:
  - user: c58b84c8b5fe4d94b3013f471f8c8615
- badges: []
  cards:
  - cards:
    - entities:
      - sensor.mikrotik_router_kib_s_sent
      - sensor.mikrotik_router_kib_s_received
      icon: mdi:web
      legend: false
      name: CURRENT INTERNET SPEED Kbps
      show:
        extrema: true
        icon: true
      type: custom:mini-graph-card
    - aggregate_func: max
      align_state: left
      decimals: 1
      entities:
      - color: var(--primary-color)
        entity: sensor.mikrotik_total_bandwidth
        name: Total Down/Up per day
      font_size: 65
      font_size_header: 14px
      group_by: date
      height: 140
      hour24: true
      hours_to_show: 168
      icon: mdi:swap-vertical-bold
      line_width: 3
      name: DIALY TRAFFIC GB
      points_per_hour: 0.5
      show:
        extrema: true
        graph: bar
        icon: true
        labels: true
        points: true
      type: custom:mini-graph-card
      update_interval: 10
    layout: vertical
    layout_type: horizontal
    min_columns: 1
    type: custom:layout-card
    view_layout: vertical
  icon: mdi:lan
  path: network
  title: Network
- badges: []
  cards:
  - card:
      show_header_toggle: false
      title: Timers
      type: entities
    filter:
      exclude:
      - state: idle
      include:
      - entity_id: timer*
    show_empty: false
    type: custom:auto-entities
  - card:
      show_header_toggle: false
      title: Battery level <10%
      type: entities
    filter:
      exclude:
      - name: Mi 9T*
      - name: '*Nokia*'
      - name: Humidity*
      include:
      - name: '*Battery'
        state: < 10
      - name: '*Battery Level'
        state: < 5
      - entity_id: sensor.goodwe_battery_soc
        state: < 60
    show_empty: false
    sort:
      method: name
    type: custom:auto-entities
  - card:
      show_header_toggle: true
      title: Shelly need update
      type: entities
    filter:
      exclude:
      - state: unavailable
      - entity_id: automation.*
      include:
      - entity_id: '*firmware_update*'
        state: 'on'
    show_empty: false
    type: custom:auto-entities
  - card:
      show_header_toggle: false
      title: PoolSense
      type: entities
    filter:
      include:
      - entity_id: sensor.poolsense_*
    show_empty: false
    type: custom:auto-entities
  - cards:
    - entities:
      - entity: switch.88e9fe88abfe
      - entity: switch.office_feed_2
      type: entities
    - entities:
      - entity: input_datetime.88e9fe88abfe_off_time_1
      - entity: input_datetime.88e9fe88abfe_on_time_1
      - entity: input_datetime.office_feed2_off_time_1
      type: glance
    title: Network Access - 88e9fe88abfe
    type: vertical-stack
  - entities:
    - buttons:
      - entity: automation.shellies_announce
        name: Shellies Announce
        state_styles:
          Unlocked:
            icon:
              color: rgb(5, 147, 255)
            text:
              color: rgb(5, 147, 255)
        tap_action:
          action: call-service
          service: automation.trigger
          service_data:
            entity_id: automation.shellies_announce
      type: custom:paper-buttons-row
    - buttons:
      - entity: automation.turn_on_pool_pump
        name: Start pool pump
        state_styles:
          Unlocked:
            icon:
              color: rgb(5, 147, 255)
            text:
              color: rgb(5, 147, 255)
        tap_action:
          action: call-service
          service: automation.trigger
          service_data:
            entity_id: automation.turn_on_pool_pump
      type: custom:paper-buttons-row
    title: Manual automation triggers
    type: entities
  - bulk_rename:
    - from: Battery Level
      to: ''
    - from: Battery
      to: ''
    - from: /\s(temperature|temp)\s/
      to: ' temp. '
    color_gradient:
    - '#ff0000'
    - '#ffff00'
    - '#00ff00'
    filter:
      exclude:
      - name: state
        operator: '>'
        value: 99
      - name: state
        value: Unavailable
      - name: state
        value: Discharging
      include:
      - name: entity_id
        value: '*_battery_level'
      - name: attributes.device_class
        value: battery
    sort_by_level: asc
    title: Batteries
    type: custom:battery-state-card
  icon: mdi:cog
  path: maintenance
  title: Maintenance
  visible:
  - user: c58b84c8b5fe4d94b3013f471f8c8615
- badges: []
  cards:
  - apex_config:
      legend:
        show: true
    graph_span: 12h
    header:
      show: true
      show_states: true
      title: Pool PH level
    now:
      label: now
      show: false
    series:
    - entity: sensor.poolsense_ph
      extend_to_end: false
      fill_raw: last
      name: PH
      show:
        extremas: true
      stroke_width: 2
    type: custom:apexcharts-card
  - apex_config:
      legend:
        show: true
    graph_span: 12h
    header:
      show: true
      show_states: true
      title: Chlorine
    now:
      label: now
      show: false
    series:
    - entity: sensor.poolsense_chlorine
      extend_to_end: false
      fill_raw: last
      name: Chlorine level
      show:
        extremas: false
      stroke_width: 2
      unit: mV
    type: custom:apexcharts-card
  - entities:
    - entity: sensor.poolsense_battery
    - entity: sensor.poolsense_temperature
    - entity: binary_sensor.poolsense_chlorine_status
    - entity: sensor.poolsense_chlorine
    - entity: sensor.poolsense_chlorine_low
    - entity: sensor.poolsense_chlorine_high
    - entity: binary_sensor.poolsense_ph_status
    - entity: sensor.poolsense_ph
    - entity: sensor.poolsense_ph_low
    - entity: sensor.poolsense_ph_high
    state_color: true
    type: entities
  icon: mdi:pool
  path: pool
  title: Pool
